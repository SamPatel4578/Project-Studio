@{
    ViewBag.HideFooter = true;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <title>Cart</title>
    <style>
        .cart-container {
            margin-top: 50px;
        }

        .cart-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid #dee2e6;
            padding: 10px 0;
        }

            .cart-item img {
                width: 100px;
                border-radius: 5px;
            }

        .cart-total {
            font-size: 20px;
            font-weight: bold;
            color: #28a745;
        }

        .quantity-box {
            display: flex;
            align-items: center;
        }

            .quantity-box input {
                text-align: center;
                width: 50px;
                margin: 0 10px;
            }

            .quantity-box button {
                padding: 5px;
                background-color: dodgerblue;
                color: white;
                border: none;
                cursor: pointer;
            }

        .delete-btn {
            background-color: red;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
        }
    </style>
    <script>
        function loadCart() {
            let cart = JSON.parse(sessionStorage.getItem('cart')) || [];
            let cartItemsContainer = document.getElementById('cartItems');
            let total = 0;

            if (cart.length === 0) {
                document.getElementById('totalPrice').innerText = `Total: $0.00`;
                return; 
            }

            cart.forEach((item, index) => {
                let cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                            <img src="${item.imageUrl}" alt="${item.name}">
                            <span>${item.name}</span>
                            <div class="quantity-box">
                                <button onclick="decreaseQuantity(${index})">-</button>
                                <input type="number" id="qty-${index}" value="${item.qty}" min="1" readonly>
                                <button onclick="increaseQuantity(${index})">+</button>
                            </div>
                            <span id="price-${index}">$${(item.price * item.qty).toFixed(2)}</span>
                            <button class="delete-btn" onclick="deleteItem(${index})">DELETE</button>
                        `;
                cartItemsContainer.appendChild(cartItem);
                total += parseFloat(item.price * item.qty);
            });

            document.getElementById('totalPrice').innerText = `Total: $${total.toFixed(2)}`;
        }

        function increaseQuantity(index) {
            let cart = JSON.parse(sessionStorage.getItem('cart'));
            cart[index].qty += 1;
            sessionStorage.setItem('cart', JSON.stringify(cart));
            updateCartDisplay();
        }

        function decreaseQuantity(index) {
            let cart = JSON.parse(sessionStorage.getItem('cart'));
            if (cart[index].qty > 1) {
                cart[index].qty -= 1;
                sessionStorage.setItem('cart', JSON.stringify(cart));
                updateCartDisplay();
            }
        }

        function deleteItem(index) {
            let cart = JSON.parse(sessionStorage.getItem('cart'));
            cart.splice(index, 1); 
            sessionStorage.setItem('cart', JSON.stringify(cart));
            updateCartDisplay();
        }

        function updateCartDisplay() {
            let cartItemsContainer = document.getElementById('cartItems');
            cartItemsContainer.innerHTML = "";

            let cart = JSON.parse(sessionStorage.getItem('cart')) || [];
            let total = 0;

            if (cart.length === 0) {
                document.getElementById('totalPrice').innerText = `Total: $0.00`;
                return;
            }

            cart.forEach((item, index) => {
                let cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                            <img src="${item.imageUrl}" alt="${item.name}">
                            <span>${item.name}</span>
                            <div class="quantity-box">
                                <button onclick="decreaseQuantity(${index})">-</button>
                                <input type="number" id="qty-${index}" value="${item.qty}" min="1" readonly>
                                <button onclick="increaseQuantity(${index})">+</button>
                            </div>
                            <span id="price-${index}">$${(item.price * item.qty).toFixed(2)}</span>
                            <button class="delete-btn" onclick="deleteItem(${index})">DELETE</button>
                        `;
                cartItemsContainer.appendChild(cartItem);
                total += parseFloat(item.price * item.qty);
            });

            document.getElementById('totalPrice').innerText = `Total: $${total.toFixed(2)}`;
        }

        window.onload = loadCart;
    </script>
</head>
<body>
    <div class="cart-container">
        <h1>Your Cart</h1>
        <div id="cartItems"></div>
        <div class="cart-total" style="padding-top: 30px;" id="totalPrice">Total: $0.00</div>

        <div>
            <a class="btn" style="margin-top:50px; margin-left: 40px; padding:20px;background-color:dodgerblue; width: 100%; text-align:center;" href="#">CHECKOUT</a>
        </div>
    </div>
</body>
</html>
